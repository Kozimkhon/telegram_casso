2025-11-10 23:19:50 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-10 23:26:53 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-10 23:33:51 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-10 23:36:58 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 10:02:39 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 11:31:21 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 14:50:38 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 14:51:10 [ERROR]: Middleware error
ReferenceError: handleAdminNotRegistered is not defined
    at file:///E:/Experiments/telegram_casso/src/presentation/controllers/AdminBotController.js:185:11
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
{
  "error": "handleAdminNotRegistered is not defined"
}
2025-11-11 14:52:18 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 14:52:22 [ERROR]: unhandledRejection: Markup is not defined
ReferenceError: Markup is not defined
    at handleAdminNotRegistered (file:///E:/Experiments/telegram_casso/src/presentation/services/admin-bot.js:7:20)
    at file:///E:/Experiments/telegram_casso/src/presentation/controllers/AdminBotController.js:185:11
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
ReferenceError: Markup is not defined
    at handleAdminNotRegistered (file:///E:/Experiments/telegram_casso/src/presentation/services/admin-bot.js:7:20)
    at file:///E:/Experiments/telegram_casso/src/presentation/controllers/AdminBotController.js:185:11
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
{
  "error": {},
  "rejection": true,
  "date": "Tue Nov 11 2025 14:52:22 GMT+0500 (Oâ€˜zbekiston standart vaqti)",
  "process": {
    "pid": 23732,
    "uid": null,
    "gid": null,
    "cwd": "E:\\Experiments\\telegram_casso",
    "execPath": "C:\\nvm4w\\nodejs\\node.exe",
    "version": "v23.7.0",
    "argv": [
      "C:\\nvm4w\\nodejs\\node.exe",
      "E:\\Experiments\\telegram_casso\\src\\index.js"
    ],
    "memoryUsage": {
      "rss": 78716928,
      "heapTotal": 35950592,
      "heapUsed": 23727792,
      "external": 2428844,
      "arrayBuffers": 25482
    }
  },
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 19051.578
  },
  "trace": [
    {
      "column": 20,
      "file": "file:///E:/Experiments/telegram_casso/src/presentation/services/admin-bot.js",
      "function": "handleAdminNotRegistered",
      "line": 7,
      "method": null,
      "native": false
    },
    {
      "column": 11,
      "file": "file:///E:/Experiments/telegram_casso/src/presentation/controllers/AdminBotController.js",
      "function": null,
      "line": 185,
      "method": null,
      "native": false
    },
    {
      "column": 14,
      "file": "async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js",
      "function": null,
      "line": 83,
      "method": null,
      "native": false
    },
    {
      "column": 17,
      "file": "E:\\Experiments\\telegram_casso\\node_modules\\telegraf\\lib\\composer.js",
      "function": "async execute",
      "line": 518,
      "method": null,
      "native": false
    },
    {
      "column": 21,
      "file": "async E:\\Experiments\\telegram_casso\\node_modules\\telegraf\\lib\\composer.js",
      "function": null,
      "line": 519,
      "method": null,
      "native": false
    },
    {
      "column": 17,
      "file": "E:\\Experiments\\telegram_casso\\node_modules\\telegraf\\lib\\composer.js",
      "function": "async execute",
      "line": 518,
      "method": null,
      "native": false
    },
    {
      "column": 17,
      "file": "E:\\Experiments\\telegram_casso\\node_modules\\telegraf\\lib\\composer.js",
      "function": "async execute",
      "line": 518,
      "method": null,
      "native": false
    },
    {
      "column": 17,
      "file": "E:\\Experiments\\telegram_casso\\node_modules\\telegraf\\lib\\composer.js",
      "function": "async execute",
      "line": 518,
      "method": null,
      "native": false
    },
    {
      "column": 17,
      "file": "E:\\Experiments\\telegram_casso\\node_modules\\telegraf\\lib\\composer.js",
      "function": "async execute",
      "line": 518,
      "method": null,
      "native": false
    },
    {
      "column": 17,
      "file": "E:\\Experiments\\telegram_casso\\node_modules\\telegraf\\lib\\composer.js",
      "function": "async execute",
      "line": 518,
      "method": null,
      "native": false
    }
  ]
}
2025-11-11 14:53:03 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 15:02:38 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 15:03:09 [ERROR]: Error during admin registration
Error: Telegram user ID is required
    at AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:38:13)
    at Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:44)
    at file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:20
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
{
  "error": "Telegram user ID is required"
}
2025-11-11 15:04:33 [ERROR]: Error during admin registration
Error: Telegram user ID is required
    at AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:38:13)
    at Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:44)
    at file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:20
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
{
  "error": "Telegram user ID is required"
}
2025-11-11 15:04:46 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 15:15:57 [ERROR]: Error during admin registration
Error: Telegram user ID is required
    at AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:38:13)
    at Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:44)
    at file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:20
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
{
  "error": "Telegram user ID is required"
}
2025-11-11 15:15:59 [ERROR]: Failed to start AdminBot
TimeoutError: Promise timed out after 90000 milliseconds
    at Timeout.<anonymous> (E:\Experiments\telegram_casso\node_modules\p-timeout\index.js:39:64)
    at listOnTimeout (node:internal/timers:614:17)
    at process.processTimers (node:internal/timers:549:7)
{
  "error": "Promise timed out after 90000 milliseconds"
}
2025-11-11 15:45:39 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 15:46:19 [ERROR]: Error during admin registration
Error: First name is required
    at Admin.validate (file:///E:/Experiments/telegram_casso/src/core/entities/Admin.entity.js:90:13)
    at new Admin (file:///E:/Experiments/telegram_casso/src/core/entities/Admin.entity.js:66:10)
    at AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:48:19)
    at async Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:22)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "First name is required"
}
2025-11-11 15:50:11 [ERROR]: Error during admin registration
Error: First name is required
    at Admin.validate (file:///E:/Experiments/telegram_casso/src/core/entities/Admin.entity.js:90:13)
    at new Admin (file:///E:/Experiments/telegram_casso/src/core/entities/Admin.entity.js:66:10)
    at AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:48:19)
    at async Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:22)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "First name is required"
}
2025-11-11 15:50:19 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 15:50:56 [ERROR]: Error during admin registration
TypeError: this.createdAt.toISOString is not a function
    at Admin.toObject (file:///E:/Experiments/telegram_casso/src/core/entities/Admin.entity.js:169:34)
    at AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/AdminRepository.js:88:24)
    at AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:61:49)
    at async Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:22)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "this.createdAt.toISOString is not a function"
}
2025-11-11 15:53:25 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 15:53:26 [ERROR]: Unhandled error in Register admin callback
Error: 400: Bad Request: query is too old and response timeout expired or query ID is invalid
    at Telegram.callApi (E:\Experiments\telegram_casso\node_modules\telegraf\lib\core\network\client.js:315:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:61:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "400: Bad Request: query is too old and response timeout expired or query ID is invalid",
  "code": 400,
  "context": "Register admin callback"
}
2025-11-11 15:53:26 [ERROR]: Unhandled error in AsyncFunction
Error: 400: Bad Request: query is too old and response timeout expired or query ID is invalid
    at Telegram.callApi (E:\Experiments\telegram_casso\node_modules\telegraf\lib\core\network\client.js:315:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:61:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "400: Bad Request: query is too old and response timeout expired or query ID is invalid",
  "code": 400,
  "context": "AsyncFunction"
}
2025-11-11 15:53:26 [ERROR]: Failed to start AdminBot
Error: 400: Bad Request: query is too old and response timeout expired or query ID is invalid
    at Telegram.callApi (E:\Experiments\telegram_casso\node_modules\telegraf\lib\core\network\client.js:315:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:61:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "400: Bad Request: query is too old and response timeout expired or query ID is invalid"
}
2025-11-11 15:53:35 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 16:02:14 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 16:05:21 [ERROR]: Error during admin registration
Error: Admin: Failed to create - SQLITE_CONSTRAINT: NOT NULL constraint failed: admins.user_id
    at AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/typeorm/BaseRepository.js:111:13)
    at async AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/AdminRepository.js:90:21)
    at async AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:61:21)
    at async Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:22)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "Admin: Failed to create - SQLITE_CONSTRAINT: NOT NULL constraint failed: admins.user_id"
}
2025-11-11 16:05:21 [ERROR]: Failed to start AdminBot
TimeoutError: Promise timed out after 90000 milliseconds
    at Timeout.<anonymous> (E:\Experiments\telegram_casso\node_modules\p-timeout\index.js:39:64)
    at listOnTimeout (node:internal/timers:614:17)
    at process.processTimers (node:internal/timers:549:7)
{
  "error": "Promise timed out after 90000 milliseconds"
}
2025-11-11 16:05:30 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 16:06:03 [ERROR]: Error during admin registration
Error: Admin: Failed to create - SQLITE_CONSTRAINT: NOT NULL constraint failed: admins.user_id
    at AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/typeorm/BaseRepository.js:111:13)
    at async AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/AdminRepository.js:90:21)
    at async AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:61:21)
    at async Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:22)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "Admin: Failed to create - SQLITE_CONSTRAINT: NOT NULL constraint failed: admins.user_id"
}
2025-11-11 16:09:15 [ERROR]: Error during admin registration
Error: Admin: Failed to create - SQLITE_CONSTRAINT: NOT NULL constraint failed: admins.user_id
    at AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/typeorm/BaseRepository.js:111:13)
    at async AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/AdminRepository.js:90:21)
    at async AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:61:21)
    at async Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:22)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "Admin: Failed to create - SQLITE_CONSTRAINT: NOT NULL constraint failed: admins.user_id"
}
2025-11-11 16:09:15 [ERROR]: Failed to start AdminBot
TimeoutError: Promise timed out after 90000 milliseconds
    at Timeout._onTimeout (E:\Experiments\telegram_casso\node_modules\p-timeout\index.js:39:64)
    at listOnTimeout (node:internal/timers:614:17)
    at process.processTimers (node:internal/timers:549:7)
{
  "error": "Promise timed out after 90000 milliseconds"
}
2025-11-11 16:44:12 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 16:44:53 [ERROR]: Error during admin registration
TypeError: this.createdAt.toISOString is not a function
    at Admin.toObject (file:///E:/Experiments/telegram_casso/src/core/entities/Admin.entity.js:169:34)
    at AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/AdminRepository.js:89:24)
    at AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:61:49)
    at async Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:22)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "this.createdAt.toISOString is not a function"
}
2025-11-11 16:44:59 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 16:45:08 [ERROR]: Error during admin registration
ReferenceError: request is not defined
    at AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/AdminRepository.js:90:54)
    at AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:61:49)
    at async Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:22)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
{
  "error": "request is not defined"
}
2025-11-11 16:46:11 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 16:46:53 [ERROR]: Error during admin registration
Error: Admin: Failed to create - SQLITE_CONSTRAINT: NOT NULL constraint failed: admins.user_id
    at AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/typeorm/BaseRepository.js:111:13)
    at async AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/AdminRepository.js:90:21)
    at async AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:61:21)
    at async Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:22)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "Admin: Failed to create - SQLITE_CONSTRAINT: NOT NULL constraint failed: admins.user_id"
}
2025-11-11 16:50:45 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 16:51:14 [ERROR]: Error during admin registration
Error: Admin: Failed to create - SQLITE_CONSTRAINT: NOT NULL constraint failed: admins.user_id
    at AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/typeorm/BaseRepository.js:111:13)
    at async AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/AdminRepository.js:91:21)
    at async AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:61:21)
    at async Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:22)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "Admin: Failed to create - SQLITE_CONSTRAINT: NOT NULL constraint failed: admins.user_id"
}
2025-11-11 16:52:57 [ERROR]: Error during admin registration
Error: Admin: Failed to create - SQLITE_CONSTRAINT: NOT NULL constraint failed: admins.user_id
    at AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/typeorm/BaseRepository.js:111:13)
    at async AdminRepository.create (file:///E:/Experiments/telegram_casso/src/data/repositories/AdminRepository.js:91:21)
    at async AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:61:21)
    at async Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:22)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "Admin: Failed to create - SQLITE_CONSTRAINT: NOT NULL constraint failed: admins.user_id"
}
2025-11-11 16:52:57 [ERROR]: Failed to start AdminBot
TimeoutError: Promise timed out after 90000 milliseconds
    at Timeout._onTimeout (E:\Experiments\telegram_casso\node_modules\p-timeout\index.js:39:64)
    at listOnTimeout (node:internal/timers:614:17)
    at process.processTimers (node:internal/timers:549:7)
{
  "error": "Promise timed out after 90000 milliseconds"
}
2025-11-11 16:56:29 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 16:57:06 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 17:12:00 [ERROR]: Error during admin registration
Error: Admin already exists for user: 566160086
    at AddAdminUseCase.execute (file:///E:/Experiments/telegram_casso/src/domain/use-cases/admin/AddAdminUseCase.js:44:13)
    at async Object.handleAdminRegistration (file:///E:/Experiments/telegram_casso/src/presentation/handlers/adminHandlers.js:36:22)
    at async file:///E:/Experiments/telegram_casso/src/presentation/middleware/callbacks.js:62:5
    at async file:///E:/Experiments/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\Experiments\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "Admin already exists for user: 566160086"
}
2025-11-11 17:17:27 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 17:49:12 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 18:55:30 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 18:56:14 [INFO]: SMS verification code sent successfully
{
  "component": "SessionAuthHandlers",
  "phone": "+998999900979"
}
2025-11-11 18:56:41 [ERROR]: Error during authentication
RPCError: 401: SESSION_PASSWORD_NEEDED (caused by auth.SignIn)
    at RPCMessageToError (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\errors\index.js:28:12)
    at MTProtoSender._handleRPCResult (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\network\MTProtoSender.js:561:58)
    at MTProtoSender._processMessage (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\network\MTProtoSender.js:492:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MTProtoSender._recvLoop (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\network\MTProtoSender.js:439:17)
{
  "error": "401: SESSION_PASSWORD_NEEDED (caused by auth.SignIn)"
}
2025-11-11 18:56:57 [ERROR]: Error during 2FA authentication
TypeError: client.computeCheck is not a function
    at Object.handlePasswordTextMessage (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/handlers/sessionAuthHandlers.js:421:34)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/middleware/commands.js:44:7
    at async file:///E:/experiments/workspace/web-dev/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "client.computeCheck is not a function"
}
2025-11-11 19:10:18 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 19:10:26 [ERROR]: Error during admin registration
ReferenceError: user is not defined
    at Object.handleAdminRegistration (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/handlers/adminHandlers.js:65:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/middleware/callbacks.js:62:5
    at async file:///E:/experiments/workspace/web-dev/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
{
  "error": "user is not defined"
}
2025-11-11 19:14:26 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 19:14:42 [INFO]: Admin auto-registration successful
{
  "component": "AdminHandlers",
  "userId": "5684628333",
  "username": "Ota_Jalol",
  "firstName": "."
}
2025-11-11 19:15:26 [INFO]: SMS verification code sent successfully
{
  "component": "SessionAuthHandlers",
  "phone": "+998930793681"
}
2025-11-11 19:15:57 [ERROR]: Unhandled error in AsyncFunction
FetchError: request to https://api.telegram.org/bot8484094074:[REDACTED]/answerCallbackQuery failed, reason: read ECONNRESET
    at ClientRequest.<anonymous> (E:\experiments\workspace\web-dev\telegram_casso\node_modules\node-fetch\lib\index.js:1501:11)
    at ClientRequest.emit (node:events:507:28)
    at emitErrorEvent (node:_http_client:104:11)
    at TLSSocket.socketErrorListener (node:_http_client:518:5)
    at TLSSocket.emit (node:events:507:28)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
{
  "error": "request to https://api.telegram.org/bot8484094074:[REDACTED]/answerCallbackQuery failed, reason: read ECONNRESET",
  "code": "ECONNRESET",
  "context": "AsyncFunction"
}
2025-11-11 19:15:57 [ERROR]: Middleware error
FetchError: request to https://api.telegram.org/bot8484094074:[REDACTED]/answerCallbackQuery failed, reason: read ECONNRESET
    at ClientRequest.<anonymous> (E:\experiments\workspace\web-dev\telegram_casso\node_modules\node-fetch\lib\index.js:1501:11)
    at ClientRequest.emit (node:events:507:28)
    at emitErrorEvent (node:_http_client:104:11)
    at TLSSocket.socketErrorListener (node:_http_client:518:5)
    at TLSSocket.emit (node:events:507:28)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
{
  "error": "request to https://api.telegram.org/bot8484094074:[REDACTED]/answerCallbackQuery failed, reason: read ECONNRESET"
}
2025-11-11 19:15:57 [ERROR]: Unhandled error in AsyncFunction
FetchError: request to https://api.telegram.org/bot8484094074:[REDACTED]/sendMessage failed, reason: read ECONNRESET
    at ClientRequest.<anonymous> (E:\experiments\workspace\web-dev\telegram_casso\node_modules\node-fetch\lib\index.js:1501:11)
    at ClientRequest.emit (node:events:507:28)
    at emitErrorEvent (node:_http_client:104:11)
    at TLSSocket.socketErrorListener (node:_http_client:518:5)
    at TLSSocket.emit (node:events:507:28)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
{
  "error": "request to https://api.telegram.org/bot8484094074:[REDACTED]/sendMessage failed, reason: read ECONNRESET",
  "code": "ECONNRESET",
  "context": "AsyncFunction"
}
2025-11-11 19:15:58 [ERROR]: Failed to start AdminBot
FetchError: request to https://api.telegram.org/bot8484094074:[REDACTED]/sendMessage failed, reason: read ECONNRESET
    at ClientRequest.<anonymous> (E:\experiments\workspace\web-dev\telegram_casso\node_modules\node-fetch\lib\index.js:1501:11)
    at ClientRequest.emit (node:events:507:28)
    at emitErrorEvent (node:_http_client:104:11)
    at TLSSocket.socketErrorListener (node:_http_client:518:5)
    at TLSSocket.emit (node:events:507:28)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
{
  "error": "request to https://api.telegram.org/bot8484094074:[REDACTED]/sendMessage failed, reason: read ECONNRESET"
}
2025-11-11 19:20:52 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 19:22:22 [ERROR]: Unhandled error in AsyncFunction
FetchError: request to https://api.telegram.org/bot8484094074:[REDACTED]/answerCallbackQuery failed, reason: read ECONNRESET
    at ClientRequest.<anonymous> (E:\experiments\workspace\web-dev\telegram_casso\node_modules\node-fetch\lib\index.js:1501:11)
    at ClientRequest.emit (node:events:507:28)
    at emitErrorEvent (node:_http_client:104:11)
    at TLSSocket.socketErrorListener (node:_http_client:518:5)
    at TLSSocket.emit (node:events:507:28)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
{
  "error": "request to https://api.telegram.org/bot8484094074:[REDACTED]/answerCallbackQuery failed, reason: read ECONNRESET",
  "code": "ECONNRESET",
  "context": "AsyncFunction"
}
2025-11-11 19:22:22 [ERROR]: Middleware error
FetchError: request to https://api.telegram.org/bot8484094074:[REDACTED]/answerCallbackQuery failed, reason: read ECONNRESET
    at ClientRequest.<anonymous> (E:\experiments\workspace\web-dev\telegram_casso\node_modules\node-fetch\lib\index.js:1501:11)
    at ClientRequest.emit (node:events:507:28)
    at emitErrorEvent (node:_http_client:104:11)
    at TLSSocket.socketErrorListener (node:_http_client:518:5)
    at TLSSocket.emit (node:events:507:28)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
{
  "error": "request to https://api.telegram.org/bot8484094074:[REDACTED]/answerCallbackQuery failed, reason: read ECONNRESET"
}
2025-11-11 19:23:21 [INFO]: SMS verification code sent successfully
{
  "component": "SessionAuthHandlers",
  "phone": "+998999900979"
}
2025-11-11 19:49:43 [ERROR]: Error during authentication
RPCError: 401: SESSION_PASSWORD_NEEDED (caused by auth.SignIn)
    at RPCMessageToError (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\errors\index.js:28:12)
    at MTProtoSender._handleRPCResult (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\network\MTProtoSender.js:561:58)
    at MTProtoSender._processMessage (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\network\MTProtoSender.js:492:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MTProtoSender._recvLoop (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\network\MTProtoSender.js:439:17)
{
  "error": "401: SESSION_PASSWORD_NEEDED (caused by auth.SignIn)"
}
2025-11-11 19:50:02 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 19:51:02 [ERROR]: Error sending verification code
RPCError: 400: PHONE_NUMBER_INVALID (caused by auth.SendCode)
    at RPCMessageToError (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\errors\index.js:28:12)
    at MTProtoSender._handleRPCResult (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\network\MTProtoSender.js:561:58)
    at MTProtoSender._processMessage (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\network\MTProtoSender.js:492:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MTProtoSender._recvLoop (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\network\MTProtoSender.js:439:17)
{
  "error": "400: PHONE_NUMBER_INVALID (caused by auth.SendCode)"
}
2025-11-11 19:52:17 [INFO]: SMS verification code sent successfully
{
  "component": "SessionAuthHandlers",
  "phone": "+998999900979"
}
2025-11-11 19:52:52 [INFO]: 2FA required - requesting password
{
  "component": "SessionAuthHandlers",
  "phone": "+998999900979"
}
2025-11-11 19:59:10 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 20:00:08 [INFO]: SMS verification code sent successfully
{
  "component": "SessionAuthHandlers",
  "phone": "+998999900979"
}
2025-11-11 20:00:24 [INFO]: 2FA required - requesting password
{
  "component": "SessionAuthHandlers",
  "phone": "+998999900979"
}
2025-11-11 20:04:35 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 20:06:16 [INFO]: SMS verification code sent successfully
{
  "component": "SessionAuthHandlers",
  "phone": "+998999900979"
}
2025-11-11 20:06:33 [INFO]: 2FA required - requesting password
{
  "component": "SessionAuthHandlers",
  "phone": "+998999900979"
}
2025-11-11 20:07:14 [DEBUG]: Updating admin
{
  "component": "UpdateAdminUseCase",
  "userId": "5684628333",
  "updates": {
    "phone": "+998999900979"
  }
}
2025-11-11 20:07:14 [ERROR]: Failed to update admin
{
  "userId": "5684628333",
  "error": {}
}
2025-11-11 20:36:32 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 20:48:10 [INFO]: SMS verification code sent successfully
{
  "component": "SessionAuthHandlers",
  "phone": "+998930793681"
}
2025-11-11 20:48:37 [DEBUG]: Updating admin
{
  "component": "UpdateAdminUseCase",
  "userId": "5684628333",
  "updates": {
    "phone": "+998930793681"
  }
}
2025-11-11 20:48:37 [ERROR]: Failed to update admin
{
  "userId": "5684628333",
  "error": {}
}
2025-11-11 20:48:37 [ERROR]: Sign in failed (not 2FA)
DatabaseError: Failed to update admin: Admin not found: 5684628333
    at UpdateAdminUseCase.execute (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/use-cases/admin/UpdateAdmin.useCase.js:88:13)
    at async Object.handleConfirmVerificationCode (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/handlers/sessionAuthHandlers.js:303:9)
    at async Immediate.<anonymous> (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/middleware/callbacks.js:134:9)
{
  "error": "Failed to update admin: Admin not found: 5684628333"
}
2025-11-11 20:51:39 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 20:51:40 [ERROR]: Failed to start AdminBot
Error: 409: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
    at Telegram.callApi (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\core\network\client.js:315:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async [Symbol.asyncIterator] (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\core\network\polling.js:30:33)
    at async Polling.loop (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\core\network\polling.js:73:30)
    at async Telegraf.launch (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\telegraf.js:194:13)
    at async AdminBotController.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/AdminBotController.js:153:7)
    at async Application.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/index.js:166:11)
{
  "error": "409: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running"
}
2025-11-11 20:54:13 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 20:54:48 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 20:54:56 [INFO]: Admin auto-registration successful
{
  "component": "AdminHandlers",
  "userId": "5684628333",
  "username": "Ota_Jalol",
  "firstName": "."
}
2025-11-11 20:55:41 [INFO]: SMS verification code sent successfully
{
  "component": "SessionAuthHandlers",
  "phone": "+998999900979"
}
2025-11-11 20:56:33 [INFO]: SMS verification code sent successfully
{
  "component": "SessionAuthHandlers",
  "phone": "+998930793681"
}
2025-11-11 20:58:01 [DEBUG]: Updating admin
{
  "component": "UpdateAdminUseCase",
  "userId": "5684628333",
  "updates": {
    "phone": "+998930793681"
  }
}
2025-11-11 21:02:44 [ERROR]: Failed to update admin
{
  "userId": "5684628333",
  "error": {}
}
2025-11-11 21:06:31 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 21:34:40 [INFO]: SMS verification code sent successfully
{
  "component": "SessionAuthHandlers",
  "phone": "+998930793681"
}
2025-11-11 21:35:11 [DEBUG]: Updating admin
{
  "component": "UpdateAdminUseCase",
  "userId": "5684628333",
  "updates": {
    "phone": "+998930793681"
  }
}
2025-11-11 21:47:20 [ERROR]: Failed to update admin
{
  "userId": "5684628333",
  "error": {}
}
2025-11-11 21:47:20 [ERROR]: Sign in failed (not 2FA)
DatabaseError: Failed to update admin: id is not defined
    at UpdateAdminUseCase.execute (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/use-cases/admin/UpdateAdmin.useCase.js:88:13)
    at async Object.handleConfirmVerificationCode (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/handlers/sessionAuthHandlers.js:303:9)
    at async Immediate.<anonymous> (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/middleware/callbacks.js:134:9)
{
  "error": "Failed to update admin: id is not defined"
}
2025-11-11 21:47:30 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 21:48:13 [INFO]: SMS verification code sent successfully
{
  "component": "SessionAuthHandlers",
  "phone": "+998930793681"
}
2025-11-11 21:48:51 [DEBUG]: Updating admin
{
  "component": "UpdateAdminUseCase",
  "userId": "5684628333",
  "updates": {
    "phone": "+998930793681"
  }
}
2025-11-11 21:49:45 [ERROR]: Failed to update admin
{
  "userId": "5684628333",
  "error": {}
}
2025-11-11 21:49:45 [ERROR]: Sign in failed (not 2FA)
DatabaseError: Failed to update admin: id is not defined
    at UpdateAdminUseCase.execute (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/use-cases/admin/UpdateAdmin.useCase.js:88:13)
    at async Object.handleConfirmVerificationCode (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/handlers/sessionAuthHandlers.js:303:9)
    at async Immediate.<anonymous> (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/middleware/callbacks.js:134:9)
{
  "error": "Failed to update admin: id is not defined"
}
2025-11-11 21:50:29 [INFO]: SMS verification code sent successfully
{
  "component": "SessionAuthHandlers",
  "phone": "+998930793681"
}
2025-11-11 21:51:17 [DEBUG]: Updating admin
{
  "component": "UpdateAdminUseCase",
  "userId": "5684628333",
  "updates": {
    "phone": "+998930793681"
  }
}
2025-11-11 21:54:04 [INFO]: Admin updated successfully
{
  "component": "UpdateAdminUseCase",
  "userId": "5684628333"
}
2025-11-11 21:54:27 [INFO]: Session added successfully (no 2FA)
{
  "component": "SessionAuthHandlers",
  "phone": "+998930793681",
  "userId": "5684628333"
}
2025-11-11 22:40:59 [INFO]: Starting UserBot...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 22:40:59 [INFO]: Loading session from database
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 22:40:59 [INFO]: Connecting to Telegram...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 22:41:00 [INFO]: Connected to Telegram
{
  "component": "UserBotController",
  "phone": null,
  "userId": "5684628333"
}
2025-11-11 22:41:00 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 22:41:00 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at UserBotController.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:175:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Application.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/index.js:102:13)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-11 22:41:00 [INFO]: Event handlers set up
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 22:41:00 [INFO]: Periodic tasks started
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 22:41:00 [INFO]: UserBot started successfully
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 22:41:00 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 23:34:40 [INFO]: Starting UserBot...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:34:40 [INFO]: Loading session from database
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:34:40 [INFO]: Connecting to Telegram...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:34:42 [INFO]: Connected to Telegram
{
  "component": "UserBotController",
  "phone": null,
  "userId": "5684628333"
}
2025-11-11 23:34:42 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:34:42 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at UserBotController.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:175:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Application.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/index.js:101:13)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-11 23:34:42 [INFO]: Event handlers set up
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:34:42 [INFO]: Periodic tasks started
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:34:42 [INFO]: UserBot started successfully
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:34:42 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 23:36:48 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:36:48 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-11 23:39:36 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:39:36 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-11 23:41:36 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:41:36 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-11 23:43:36 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:43:36 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-11 23:45:36 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:45:36 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-11 23:47:36 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:47:36 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-11 23:49:36 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:49:36 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-11 23:51:36 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:51:36 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-11 23:53:36 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:53:36 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-11 23:54:19 [INFO]: Starting UserBot...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:54:19 [INFO]: Loading session from database
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:54:19 [INFO]: Connecting to Telegram...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:54:20 [INFO]: Connected to Telegram
{
  "component": "UserBotController",
  "phone": null,
  "userId": "5684628333"
}
2025-11-11 23:54:20 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:54:20 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at UserBotController.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:175:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Application.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/index.js:101:13)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-11 23:54:20 [INFO]: Event handlers set up
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:54:20 [INFO]: Periodic tasks started
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:54:20 [INFO]: UserBot started successfully
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:54:20 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-11 23:56:20 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:56:20 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-11 23:58:20 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-11 23:58:20 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-12 00:00:20 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:00:20 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-12 00:02:20 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:02:20 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-12 00:04:20 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:04:20 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-12 00:06:20 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:06:20 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-12 00:08:20 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:08:20 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-12 00:10:20 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:10:20 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-12 00:12:20 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:12:20 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-12 00:14:20 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:14:20 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-12 00:16:20 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:16:20 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-12 00:18:20 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:18:20 [ERROR]: Failed to sync channels
Error: findByAdminSession() must be implemented
    at ChannelRepository.findByAdminSession (file:///E:/experiments/workspace/web-dev/telegram_casso/src/core/interfaces/IChannelRepository.js:24:11)
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:379:53)
    at Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:43)
    at listOnTimeout (node:internal/timers:611:17)
    at process.processTimers (node:internal/timers:546:7)
{
  "error": "findByAdminSession() must be implemented"
}
2025-11-12 00:20:18 [INFO]: Starting UserBot...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:20:18 [INFO]: Loading session from database
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:20:18 [INFO]: Connecting to Telegram...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:20:19 [INFO]: Connected to Telegram
{
  "component": "UserBotController",
  "phone": null,
  "userId": "5684628333"
}
2025-11-12 00:20:19 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:20:19 [ERROR]: Failed to sync channels
TypeError: Cannot read properties of undefined (reading 'length')
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:383:43)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async UserBotController.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:175:7)
    at async Application.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/index.js:101:13)
{
  "error": "Cannot read properties of undefined (reading 'length')"
}
2025-11-12 00:20:19 [INFO]: Event handlers set up
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:20:19 [INFO]: Periodic tasks started
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:20:19 [INFO]: UserBot started successfully
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:20:19 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-12 00:20:48 [ERROR]: Unhandled error in Sync channels callback
TypeError: handlers.handleSyncChannels is not a function
    at file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/middleware/callbacks.js:204:24
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///E:/experiments/workspace/web-dev/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
{
  "error": "handlers.handleSyncChannels is not a function",
  "code": "UNKNOWN",
  "context": "Sync channels callback"
}
2025-11-12 00:20:48 [ERROR]: Middleware error
TypeError: handlers.handleSyncChannels is not a function
    at file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/middleware/callbacks.js:204:24
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///E:/experiments/workspace/web-dev/telegram_casso/src/shared/errorHandler.js:83:14
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
{
  "error": "handlers.handleSyncChannels is not a function"
}
2025-11-12 00:22:19 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:22:19 [ERROR]: Failed to sync channels
TypeError: Cannot read properties of undefined (reading 'length')
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:383:43)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:19)
{
  "error": "Cannot read properties of undefined (reading 'length')"
}
2025-11-12 00:24:19 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:24:19 [ERROR]: Failed to sync channels
TypeError: Cannot read properties of undefined (reading 'length')
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:383:43)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:19)
{
  "error": "Cannot read properties of undefined (reading 'length')"
}
2025-11-12 00:26:19 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:26:19 [ERROR]: Failed to sync channels
TypeError: Cannot read properties of undefined (reading 'length')
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:383:43)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:19)
{
  "error": "Cannot read properties of undefined (reading 'length')"
}
2025-11-12 00:47:26 [INFO]: Starting UserBot...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:47:26 [INFO]: Loading session from database
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:47:26 [INFO]: Connecting to Telegram...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:47:27 [INFO]: Connected to Telegram
{
  "component": "UserBotController",
  "phone": null,
  "userId": "5684628333"
}
2025-11-12 00:47:27 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:47:27 [INFO]: Found undefined channels to monitor
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:47:27 [ERROR]: Failed to sync channels
TypeError: channels is not iterable
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:386:29)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async UserBotController.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:175:7)
    at async Application.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/index.js:101:13)
{
  "error": "channels is not iterable"
}
2025-11-12 00:47:27 [INFO]: Event handlers set up
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:47:27 [INFO]: Periodic tasks started
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:47:27 [INFO]: UserBot started successfully
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:47:27 [INFO]: Starting AdminBot...
{
  "component": "AdminBotController"
}
2025-11-12 00:49:27 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:49:27 [INFO]: Found undefined channels to monitor
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:49:27 [ERROR]: Failed to sync channels
TypeError: channels is not iterable
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:386:29)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:19)
{
  "error": "channels is not iterable"
}
2025-11-12 00:51:27 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:51:27 [INFO]: Found undefined channels to monitor
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:51:27 [ERROR]: Failed to sync channels
TypeError: channels is not iterable
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:386:29)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:19)
{
  "error": "channels is not iterable"
}
2025-11-12 00:53:27 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:53:27 [INFO]: Found undefined channels to monitor
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:55:24 [ERROR]: Failed to sync channels
TypeError: channels is not iterable
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:386:29)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:19)
{
  "error": "channels is not iterable"
}
2025-11-12 00:55:27 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:55:27 [INFO]: Found undefined channels to monitor
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:55:27 [ERROR]: Failed to sync channels
TypeError: channels is not iterable
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:386:29)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:19)
{
  "error": "channels is not iterable"
}
2025-11-12 00:57:27 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:57:27 [INFO]: Found undefined channels to monitor
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:57:27 [ERROR]: Failed to sync channels
TypeError: channels is not iterable
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:386:29)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:19)
{
  "error": "channels is not iterable"
}
2025-11-12 00:59:27 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:59:27 [INFO]: Found undefined channels to monitor
{
  "component": "UserBotController",
  "phone": null
}
2025-11-12 00:59:27 [ERROR]: Failed to sync channels
TypeError: channels is not iterable
    at #syncChannels (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:386:29)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Timeout._onTimeout (file:///E:/experiments/workspace/web-dev/telegram_casso/src/presentation/controllers/UserBotController.js:575:19)
{
  "error": "channels is not iterable"
}
2025-11-12 01:01:27 [INFO]: Syncing channels...
{
  "component": "UserBotController",
  "phone": null
}
