2025-11-06 21:07:33 [INFO]: üöÄ Starting Telegram Casso Multi-User Application...
2025-11-06 21:07:33 [INFO]: ‚úÖ Configuration validated successfully
2025-11-06 21:07:33 [INFO]: ‚úÖ Database initialized successfully
2025-11-06 21:07:33 [INFO]: üéõÔ∏è Initializing Multi-UserBot Manager...
2025-11-06 21:07:33 [INFO]: Initializing userbots from database...
{
  "component": "UserBotManager"
}
2025-11-06 21:07:33 [INFO]: Found 0 active sessions
{
  "component": "UserBotManager"
}
2025-11-06 21:07:33 [INFO]: Resume checker started
{
  "component": "UserBotManager"
}
2025-11-06 21:07:33 [INFO]: UserBot manager initialized
{
  "component": "UserBotManager",
  "activeBots": 0
}
2025-11-06 21:07:33 [INFO]: ‚úÖ Multi-UserBot Manager initialized
2025-11-06 21:07:33 [INFO]: üìä Active Sessions: 0/0
2025-11-06 21:07:33 [INFO]: üí° No sessions found. Use AdminBot to add sessions manually
2025-11-06 21:07:33 [INFO]: üì± Send /start to AdminBot and use "Add Session" button
2025-11-06 21:07:33 [INFO]: ‚öôÔ∏è Initializing AdminBot with Session Management...
2025-11-06 21:07:33 [INFO]: Multi-session management and authentication UI enabled
{
  "component": "AdminBot"
}
2025-11-06 21:07:33 [INFO]: Starting AdminBot...
{
  "component": "AdminBot"
}
2025-11-06 21:07:33 [INFO]: About to launch AdminBot...
{
  "component": "AdminBot"
}
2025-11-06 21:07:41 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "/start",
  "userId": 566160086
}
2025-11-06 21:07:43 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "add_session",
  "userId": 566160086
}
2025-11-06 21:07:47 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_plus",
  "userId": 566160086
}
2025-11-06 21:07:48 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_9",
  "userId": 566160086
}
2025-11-06 21:07:49 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_9",
  "userId": 566160086
}
2025-11-06 21:07:51 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_8",
  "userId": 566160086
}
2025-11-06 21:07:52 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_9",
  "userId": 566160086
}
2025-11-06 21:07:53 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_9",
  "userId": 566160086
}
2025-11-06 21:07:55 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_9",
  "userId": 566160086
}
2025-11-06 21:07:56 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_9",
  "userId": 566160086
}
2025-11-06 21:07:57 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_0",
  "userId": 566160086
}
2025-11-06 21:07:59 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_0",
  "userId": 566160086
}
2025-11-06 21:08:00 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_9",
  "userId": 566160086
}
2025-11-06 21:08:01 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_plus",
  "userId": 566160086
}
2025-11-06 21:08:02 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_backspace",
  "userId": 566160086
}
2025-11-06 21:08:04 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_7",
  "userId": 566160086
}
2025-11-06 21:08:06 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_9",
  "userId": 566160086
}
2025-11-06 21:08:09 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "phone_confirm",
  "userId": 566160086
}
2025-11-06 21:08:15 [INFO]: SMS verification code sent successfully
{
  "phone": "+998999900979"
}
2025-11-06 21:08:22 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "code_1",
  "userId": 566160086
}
2025-11-06 21:08:23 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "code_3",
  "userId": 566160086
}
2025-11-06 21:08:24 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "code_7",
  "userId": 566160086
}
2025-11-06 21:08:26 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "code_6",
  "userId": 566160086
}
2025-11-06 21:08:27 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "code_2",
  "userId": 566160086
}
2025-11-06 21:08:29 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "code_confirm",
  "userId": 566160086
}
2025-11-06 21:08:30 [ERROR]: Error during authentication
RPCError: 401: SESSION_PASSWORD_NEEDED (caused by auth.SignIn)
    at RPCMessageToError (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\errors\index.js:28:12)
    at MTProtoSender._handleRPCResult (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\network\MTProtoSender.js:561:58)
    at MTProtoSender._processMessage (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\network\MTProtoSender.js:492:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async MTProtoSender._recvLoop (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegram\network\MTProtoSender.js:439:17)
{
  "error": "401: SESSION_PASSWORD_NEEDED (caused by auth.SignIn)"
}
2025-11-06 21:08:35 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "password_letters",
  "userId": 566160086
}
2025-11-06 21:11:09 [INFO]: üöÄ Starting Telegram Casso Multi-User Application...
2025-11-06 21:11:09 [INFO]: ‚úÖ Configuration validated successfully
2025-11-06 21:11:09 [INFO]: ‚úÖ Database initialized successfully
2025-11-06 21:11:09 [INFO]: üéõÔ∏è Initializing Multi-UserBot Manager...
2025-11-06 21:11:09 [INFO]: Initializing userbots from database...
{
  "component": "UserBotManager"
}
2025-11-06 21:11:09 [INFO]: Found 0 active sessions
{
  "component": "UserBotManager"
}
2025-11-06 21:11:09 [INFO]: Resume checker started
{
  "component": "UserBotManager"
}
2025-11-06 21:11:09 [INFO]: UserBot manager initialized
{
  "component": "UserBotManager",
  "activeBots": 0
}
2025-11-06 21:11:09 [INFO]: ‚úÖ Multi-UserBot Manager initialized
2025-11-06 21:11:09 [INFO]: üìä Active Sessions: 0/0
2025-11-06 21:11:09 [INFO]: üí° No sessions found. Use AdminBot to add sessions manually
2025-11-06 21:11:09 [INFO]: üì± Send /start to AdminBot and use "Add Session" button
2025-11-06 21:11:09 [INFO]: ‚öôÔ∏è Initializing AdminBot with Session Management...
2025-11-06 21:11:09 [INFO]: Multi-session management and authentication UI enabled
{
  "component": "AdminBot"
}
2025-11-06 21:11:09 [INFO]: Starting AdminBot...
{
  "component": "AdminBot"
}
2025-11-06 21:11:09 [INFO]: About to launch AdminBot...
{
  "component": "AdminBot"
}
2025-11-06 21:11:10 [ERROR]: Failed to start AdminBot
Error: 409: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
    at Telegram.callApi (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\core\network\client.js:315:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async [Symbol.asyncIterator] (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\core\network\polling.js:30:33)
    at async Polling.loop (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\core\network\polling.js:73:30)
    at async Telegraf.launch (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\telegraf.js:194:13)
    at async AdminBot.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/bots/adminBot.js:855:7)
    at async TelegramCassoApp.initializeAdminBot (file:///E:/experiments/workspace/web-dev/telegram_casso/src/index.js:106:7)
    at async TelegramCassoApp.start (file:///E:/experiments/workspace/web-dev/telegram_casso/src/index.js:42:7)
    at async main (file:///E:/experiments/workspace/web-dev/telegram_casso/src/index.js:227:5)
{
  "error": "409: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running"
}
2025-11-06 21:12:12 [DEBUG]: Admin command received
{
  "component": "AdminBot",
  "command": "password_letters",
  "userId": 566160086
}
2025-11-06 21:12:43 [WARN]: Unauthorized access attempt
{
  "component": "AdminBot",
  "userId": 5684628333,
  "username": "Ota_Jalol",
  "command": "/start"
}
2025-11-06 21:19:25 [INFO]: üöÄ Starting Telegram Casso Multi-User Application...
2025-11-06 21:19:25 [INFO]: ‚úÖ Configuration validated successfully
2025-11-06 21:19:25 [INFO]: ‚úÖ Database initialized successfully
2025-11-06 21:19:25 [INFO]: üéõÔ∏è Initializing Multi-UserBot Manager...
2025-11-06 21:19:25 [INFO]: Initializing userbots from database...
{
  "component": "UserBotManager"
}
2025-11-06 21:19:25 [INFO]: Found 0 active sessions
{
  "component": "UserBotManager"
}
2025-11-06 21:19:25 [INFO]: Resume checker started
{
  "component": "UserBotManager"
}
2025-11-06 21:19:25 [INFO]: UserBot manager initialized
{
  "component": "UserBotManager",
  "activeBots": 0
}
2025-11-06 21:19:25 [INFO]: ‚úÖ Multi-UserBot Manager initialized
2025-11-06 21:19:25 [INFO]: üìä Active Sessions: 0/0
2025-11-06 21:19:25 [INFO]: üí° No sessions found. Use AdminBot to add sessions manually
2025-11-06 21:19:25 [INFO]: üì± Send /start to AdminBot and use "Add Session" button
2025-11-06 21:19:25 [INFO]: ‚öôÔ∏è Initializing AdminBot with Session Management...
2025-11-06 21:19:25 [INFO]: Multi-session management and authentication UI enabled
{
  "component": "AdminBot"
}
2025-11-06 21:19:25 [INFO]: Starting AdminBot...
{
  "component": "AdminBot"
}
2025-11-06 21:19:25 [INFO]: About to launch AdminBot...
{
  "component": "AdminBot"
}
2025-11-06 21:19:43 [WARN]: Unauthorized access attempt
{
  "component": "AdminBot",
  "userId": 5684628333,
  "username": "Ota_Jalol",
  "command": "/start"
}
2025-11-06 21:19:46 [WARN]: Unauthorized access attempt
{
  "component": "AdminBot",
  "userId": 5684628333,
  "username": "Ota_Jalol"
}
2025-11-06 21:19:47 [ERROR]: Unhandled error in Admin auth middleware
Error: 400: Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
    at Telegram.callApi (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\core\network\client.js:315:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///E:/experiments/workspace/web-dev/telegram_casso/src/bots/adminBot.js:96:11
    at async file:///E:/experiments/workspace/web-dev/telegram_casso/src/utils/errorHandler.js:83:14
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:519:21
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
    at async execute (E:\experiments\workspace\web-dev\telegram_casso\node_modules\telegraf\lib\composer.js:518:17)
{
  "error": "400: Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message",
  "code": 400,
  "context": "Admin auth middleware"
}
2025-11-06 21:19:47 [ERROR]: Bot error occurred
{
  "error": "400: Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message",
  "userId": 5684628333,
  "command": "register_admin"
}
2025-11-06 21:21:21 [INFO]: üöÄ Starting Telegram Casso Multi-User Application...
2025-11-06 21:21:21 [INFO]: ‚úÖ Configuration validated successfully
2025-11-06 21:21:21 [INFO]: ‚úÖ Database initialized successfully
2025-11-06 21:21:21 [INFO]: üéõÔ∏è Initializing Multi-UserBot Manager...
2025-11-06 21:21:21 [INFO]: Initializing userbots from database...
{
  "component": "UserBotManager"
}
2025-11-06 21:21:21 [INFO]: Found 0 active sessions
{
  "component": "UserBotManager"
}
2025-11-06 21:21:21 [INFO]: Resume checker started
{
  "component": "UserBotManager"
}
2025-11-06 21:21:21 [INFO]: UserBot manager initialized
{
  "component": "UserBotManager",
  "activeBots": 0
}
2025-11-06 21:21:21 [INFO]: ‚úÖ Multi-UserBot Manager initialized
2025-11-06 21:21:21 [INFO]: üìä Active Sessions: 0/0
2025-11-06 21:21:21 [INFO]: üí° No sessions found. Use AdminBot to add sessions manually
2025-11-06 21:21:21 [INFO]: üì± Send /start to AdminBot and use "Add Session" button
2025-11-06 21:21:21 [INFO]: ‚öôÔ∏è Initializing AdminBot with Session Management...
2025-11-06 21:21:21 [INFO]: Multi-session management and authentication UI enabled
{
  "component": "AdminBot"
}
2025-11-06 21:21:21 [INFO]: Starting AdminBot...
{
  "component": "AdminBot"
}
2025-11-06 21:21:21 [INFO]: About to launch AdminBot...
{
  "component": "AdminBot"
}
2025-11-06 21:22:46 [INFO]: Admin user added successfully
{
  "user_id": "566160086",
  "first_name": "Test Admin",
  "username": "testadmin",
  "role": "admin"
}
2025-11-06 21:22:59 [ERROR]: Error adding admin user
{
  "adminData": {
    "user_id": "566160086",
    "first_name": "Test Admin",
    "last_name": null,
    "username": "testadmin",
    "role": "admin"
  },
  "error": "SQLITE_CONSTRAINT: UNIQUE constraint failed: admins.user_id"
}
